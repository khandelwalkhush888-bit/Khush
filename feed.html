<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Feed - My Social</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h2>My Social</h2>
    <nav>
      <a href="feed.html">Feed</a>
      <a href="chat.html">Chat</a>
      <a href="upload.html">Upload</a>
      <a href="profile.html">Profile</a>
      <button onclick="logout()">Logout</button>
    </nav>
  </header>

  <main id="feed"></main>

  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage.js"></script>
  <script src="app.js"></script>
  <script>
    const feed = document.getElementById("feed");
    db.ref("posts").on("child_added", snap => {
      const post = snap.val();
      const div = document.createElement("div");
      div.className = "post card";
      div.innerHTML = `
        <h3>${post.user}</h3>
        ${post.type === "image" ? `<img src="${post.url}" />` : `<video src="${post.url}" controls></video>`}
        <p>${post.caption || ""}</p>
      `;
      feed.prepend(div);
    });
  </script>
</body>
</html>